package entities;

import entities.projectiles.RayCast;
import general.Level;
import util.Velocity;

public class Enemy extends LivingEntity {
	
	protected LivingEntity target;

	public Enemy(Level level, double x, double y, double width, double height, ID id) {
		super(level, x, y, width, height, id);
	}
	public LivingEntity getTarget() {
		return target;
	}
	public void setTarget(LivingEntity target) {
		this.target = target;
	}
	public RayCast rayCastForTarget(double size, int bounces, int immuneFrames, int lifeSpan, double bulletSpeed) {
		double angle = Math.PI/20;
		RayCast cast = null;
		for (int i=0; i < 40; i++) {
			RayCast tempCast = new RayCast(level, x+(width/2), y+(height/2), size, size, this);
			if (tempCast.simulateCast(target, new Velocity(Math.cos(i*angle), Math.sin(i*angle)).normalize().multiply(8), bounces, immuneFrames, lifeSpan))
				if (cast == null || tempCast.getBounces() < cast.getBounces())
					cast = tempCast;
		}
		return cast;
	}
}
